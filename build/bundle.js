var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function i(t){t.forEach(n)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function l(t,e,n,o){if(t){const i=u(t,e,n,o);return t[0](i)}}function u(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function a(t,e,n,o,i,s,r){const c=function(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|i[o];return t}return e.dirty|i}return e.dirty}(e,o,i,s);if(c){const i=u(e,n,o,r);t.p(i,c)}}function d(t,e,n=e){return t.set(n),e}const f="undefined"!=typeof window;let p=f?()=>window.performance.now():()=>Date.now(),m=f?t=>requestAnimationFrame(t):t;const $=new Set;function h(t){$.forEach(e=>{e.c(t)||($.delete(e),e.f())}),0!==$.size&&m(h)}function g(t){let e;return 0===$.size&&m(h),{promise:new Promise(n=>{$.add(e={c:t,f:n})}),abort(){$.delete(e)}}}function v(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function x(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function k(){return w(" ")}function _(){return w("")}function E(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function C(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function R(t,e){e=""+e,t.data!==e&&(t.data=e)}function N(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}let M;function S(){if(void 0===M){M=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){M=!0}}return M}function A(t,e,n){t.classList[n?"add":"remove"](e)}const B=new Set;let j,I=0;function T(t,e,n,o,i,s,r,c=0){const l=16.666/o;let u="{\n";for(let t=0;t<=1;t+=l){const o=e+(n-e)*s(t);u+=100*t+`%{${r(o,1-o)}}\n`}const a=u+`100% {${r(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)}_${c}`,f=t.ownerDocument;B.add(f);const p=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(x("style")).sheet),m=f.__svelte_rules||(f.__svelte_rules={});m[d]||(m[d]=!0,p.insertRule(`@keyframes ${d} ${a}`,p.cssRules.length));const $=t.style.animation||"";return t.style.animation=`${$?$+", ":""}${d} ${o}ms linear ${i}ms 1 both`,I+=1,d}function D(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-o.length;i&&(t.style.animation=o.join(", "),I-=i,I||m(()=>{I||(B.forEach(t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),B.clear())}))}function P(t){j=t}function z(){if(!j)throw new Error("Function called outside component initialization");return j}function L(t){z().$$.on_mount.push(t)}const O=[],X=[],F=[],W=[],Y=Promise.resolve();let q=!1;function J(t){F.push(t)}function U(t){W.push(t)}let H=!1;const V=new Set;function G(){if(!H){H=!0;do{for(let t=0;t<O.length;t+=1){const e=O[t];P(e),K(e.$$)}for(O.length=0;X.length;)X.pop()();for(let t=0;t<F.length;t+=1){const e=F[t];V.has(e)||(V.add(e),e())}F.length=0}while(O.length);for(;W.length;)W.pop()();q=!1,H=!1,V.clear()}}function K(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(J)}}let Q;function Z(){return Q||(Q=Promise.resolve(),Q.then(()=>{Q=null})),Q}function tt(t,e,n){t.dispatchEvent(function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(`${e?"intro":"outro"}${n}`))}const et=new Set;let nt;function ot(){nt={r:0,c:[],p:nt}}function it(){nt.r||i(nt.c),nt=nt.p}function st(t,e){t&&t.i&&(et.delete(t),t.i(e))}function rt(t,e,n,o){if(t&&t.o){if(et.has(t))return;et.add(t),nt.c.push(()=>{et.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}const ct={duration:0};function lt(n,o,i){let r,c,l=o(n,i),u=!1,a=0;function d(){r&&D(n,r)}function f(){const{delay:o=0,duration:i=300,easing:s=e,tick:f=t,css:m}=l||ct;m&&(r=T(n,0,1,i,o,s,m,a++)),f(0,1);const $=p()+o,h=$+i;c&&c.abort(),u=!0,J(()=>tt(n,!0,"start")),c=g(t=>{if(u){if(t>=h)return f(1,0),tt(n,!0,"end"),d(),u=!1;if(t>=$){const e=s((t-$)/i);f(e,1-e)}}return u})}let m=!1;return{start(){m||(D(n),s(l)?(l=l(),Z().then(f)):f())},invalidate(){m=!1},end(){u&&(d(),u=!1)}}}function ut(n,o,r){let c,l=o(n,r),u=!0;const a=nt;function d(){const{delay:o=0,duration:s=300,easing:r=e,tick:d=t,css:f}=l||ct;f&&(c=T(n,1,0,s,o,r,f));const m=p()+o,$=m+s;J(()=>tt(n,!1,"start")),g(t=>{if(u){if(t>=$)return d(0,1),tt(n,!1,"end"),--a.r||i(a.c),!1;if(t>=m){const e=r((t-m)/s);d(1-e,e)}}return u})}return a.r+=1,s(l)?Z().then(()=>{l=l(),d()}):d(),{end(t){t&&l.tick&&l.tick(1,0),u&&(c&&D(n,c),u=!1)}}}function at(t,e){t.d(1),e.delete(t.key)}function dt(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function ft(t){t&&t.c()}function pt(t,e,o){const{fragment:r,on_mount:c,on_destroy:l,after_update:u}=t.$$;r&&r.m(e,o),J(()=>{const e=c.map(n).filter(s);l?l.push(...e):i(e),t.$$.on_mount=[]}),u.forEach(J)}function mt(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function $t(t,e){-1===t.$$.dirty[0]&&(O.push(t),q||(q=!0,Y.then(G)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ht(e,n,s,r,c,l,u=[-1]){const a=j;P(e);const d=n.props||{},f=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:o(),dirty:u};let p=!1;if(f.ctx=s?s(e,d,(t,n,...o)=>{const i=o.length?o[0]:n;return f.ctx&&c(f.ctx[t],f.ctx[t]=i)&&(f.bound[t]&&f.bound[t](i),p&&$t(e,t)),n}):[],f.update(),p=!0,i(f.before_update),f.fragment=!!r&&r(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(b)}else f.fragment&&f.fragment.c();n.intro&&st(e.$$.fragment),pt(e,n.target,n.anchor),G()}P(a)}class gt{$destroy(){mt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function vt(t){let e;return{c(){e=x("div"),N(e,"transform","translate("+t[2].x+"px, "+t[2].y+"px) scale("+t[3]+")"),C(e,"class","svelte-1eavhw6"),A(e,"pressed",t[0]),A(e,"scrubbing",t[1])},m(t,n){y(t,e,n)},p(t,n){12&n&&N(e,"transform","translate("+t[2].x+"px, "+t[2].y+"px) scale("+t[3]+")"),1&n&&A(e,"pressed",t[0]),2&n&&A(e,"scrubbing",t[1])},d(t){t&&b(e)}}}function yt(e){let n,o=e[2]&&vt(e);return{c(){o&&o.c(),n=_()},m(t,e){o&&o.m(t,e),y(t,n,e)},p(t,[e]){t[2]?o?o.p(t,e):(o=vt(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&b(n)}}}function bt(t,e,n){let o,i,s,{position:r}=e,{container:c}=e,{pressed:l}=e,{scrubbing:u}=e;return t.$set=t=>{"position"in t&&n(4,r=t.position),"container"in t&&n(5,c=t.container),"pressed"in t&&n(0,l=t.pressed),"scrubbing"in t&&n(1,u=t.scrubbing)},t.$$.update=()=>{16&t.$$.dirty&&n(2,o=function(t){return c?(i=c.getBoundingClientRect(),{x:t.x*i.width-10,y:t.y*i.height-10}):t}(r)),1&t.$$.dirty&&n(3,s=l?1.2:1)},[l,u,o,s,r,c]}class xt extends gt{constructor(t){super(),ht(this,t,bt,yt,r,{position:4,container:5,pressed:0,scrubbing:1})}}const wt=[];function kt(e,n=t){let o;const i=[];function s(t){if(r(e,t)&&(e=t,o)){const t=!wt.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),wt.push(n,e)}if(t){for(let t=0;t<wt.length;t+=2)wt[t][0](wt[t+1]);wt.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(r,c=t){const l=[r,c];return i.push(l),1===i.length&&(o=n(s)||t),r(e),()=>{const t=i.indexOf(l);-1!==t&&i.splice(t,1),0===i.length&&(o(),o=null)}}}}const _t=function(){const{subscribe:t,set:e,update:n}=kt([]);return{subscribe:t,add:t=>n(e=>[...e,t]),reset:()=>e([])}}(),Et=kt([]);function Ct(t){return Math.round(15*t)}function Rt(t){let e;const n=new xt({props:{position:t[1],pressed:t[2],container:t[0],scrubbing:t[3]}});return{c(){ft(n.$$.fragment)},m(t,o){pt(n,t,o),e=!0},p(t,e){const o={};2&e&&(o.position=t[1]),4&e&&(o.pressed=t[2]),1&e&&(o.container=t[0]),8&e&&(o.scrubbing=t[3]),n.$set(o)},i(t){e||(st(n.$$.fragment,t),e=!0)},o(t){rt(n.$$.fragment,t),e=!1},d(t){mt(n,t)}}}function Nt(t){let e,n,o,r,c,u,d,f=t[4]&&Rt(t);const p=t[16].default,m=l(p,t,t[15],null);return{c(){e=x("div"),n=x("div"),o=x("div"),f&&f.c(),r=k(),m&&m.c(),C(o,"class","inner svelte-4zeg1e"),C(n,"class","video svelte-4zeg1e"),C(e,"class","main svelte-4zeg1e")},m(i,l){var a;y(i,e,l),v(e,n),v(n,o),f&&f.m(o,null),v(o,r),m&&m.m(o,null),t[17](o),c=!0,u||(d=[E(window,"keydown",t[8]),E(window,"keyup",t[9]),E(window,"mousemove",t[5]),E(window,"mouseup",t[6]),E(e,"mousedown",t[7]),E(e,"contextmenu",(a=Mt,function(t){return t.preventDefault(),a.call(this,t)})),E(e,"mouseleave",t[18]),E(e,"mouseenter",(function(){s(t[4]=!0)&&(t[4]=!0).apply(this,arguments)}))],u=!0)},p(e,[n]){(t=e)[4]?f?(f.p(t,n),16&n&&st(f,1)):(f=Rt(t),f.c(),st(f,1),f.m(o,r)):f&&(ot(),rt(f,1,1,()=>{f=null}),it()),m&&m.p&&32768&n&&a(m,p,t,t[15],n,null,null)},i(t){c||(st(f),st(m,t),c=!0)},o(t){rt(f),rt(m,t),c=!1},d(n){n&&b(e),f&&f.d(),m&&m.d(n),t[17](null),u=!1,i(d)}}}function Mt(){return!1}function St(t,e,n){let o,i;c(t,Et,t=>n(13,o=t));let s,r,l,{container:u}=e,a=!1,f=0,{time:p}=e;function m(t){let e=u.getBoundingClientRect(),n=t.x-e.left,o=t.y-e.top;return{x:n/e.width,y:o/e.height}}let{$$slots:$={},$$scope:h}=e;return t.$set=t=>{"container"in t&&n(0,u=t.container),"time"in t&&n(10,p=t.time),"$$scope"in t&&n(15,h=t.$$scope)},[u,i,s,a,r,function(t){n(1,i=m({x:t.clientX,y:t.clientY})),s&&d(Et,o[Ct(p)]={...i,track:f,time:p},o),a&&d(Et,o[Ct(p)]="deleted",o),(s||a)&&_t.add({...i,time:p,track:f,left:s,right:a})},function(t){n(2,s=!1),n(1,i=m({x:t.clientX,y:t.clientY})),clearInterval(l),l=null,n(3,a=!1)},function(t){1==t.buttons&&(n(2,s=!0),n(3,a=!1),f+=1),2==t.buttons&&(n(2,s=!1),n(3,a=!0)),l=setInterval(()=>{s&&d(Et,o[Ct(p)]={...i,track:f,time:p},o),a&&d(Et,o[Ct(p)]="deleted",o),_t.add({...i,time:p,track:f,left:s,right:a})},20)},function(t){console.log(t.key),"Backspace"===t.key&&(n(3,a=!0),n(2,s=!1),l||(l=setInterval(()=>{a&&d(Et,o[Ct(p)]="deleted",o),_t.add({...i,time:p,track:f,left:s,right:a})},20)))},function(t){"Backspace"===t.key&&(n(3,a=!1),clearInterval(l),l=null)},p,f,l,o,m,h,$,function(t){X[t?"unshift":"push"](()=>{n(0,u=t)})},()=>n(4,r=!1)]}class At extends gt{constructor(t){super(),ht(this,t,St,Nt,r,{container:0,time:10})}}const Bt=function(){const{subscribe:t,set:e,update:n}=kt({rate:1,src:"https://github.com/intel-iot-devkit/sample-videos/blob/master/people-detection.mp4?raw=true",duration:0});return{subscribe:t,play:()=>n(t=>({...t,rate:1})),pause:()=>n(t=>({...t,rate:0})),setDuration:t=>n(e=>({...e,duration:t})),setSrc:t=>n(e=>({...e,src:t}))}}(),jt=function(){const{subscribe:t,set:e,update:n}=kt(1);return{subscribe:t,increase:()=>n(t=>Math.min(t+.5,4)),decrease:()=>n(t=>Math.max(t-.5,1)),set:e}}();function It(t){return"[object Date]"===Object.prototype.toString.call(t)}function Tt(t,e={}){const n=kt(t),{stiffness:o=.15,damping:i=.8,precision:s=.01}=e;let r,c,l,u=t,a=t,d=1,f=0,m=!1;function $(e,o={}){a=e;const i=l={};if(null==t||o.hard||h.stiffness>=1&&h.damping>=1)return m=!0,r=p(),u=e,n.set(t=a),Promise.resolve();if(o.soft){const t=!0===o.soft?.5:+o.soft;f=1/(60*t),d=0}return c||(r=p(),m=!1,c=g(e=>{if(m)return m=!1,c=null,!1;d=Math.min(d+f,1);const o={inv_mass:d,opts:h,settled:!0,dt:60*(e-r)/1e3},i=function t(e,n,o,i){if("number"==typeof o||It(o)){const t=i-o,s=(o-n)/(e.dt||1/60),r=(s+(e.opts.stiffness*t-e.opts.damping*s)*e.inv_mass)*e.dt;return Math.abs(r)<e.opts.precision&&Math.abs(t)<e.opts.precision?i:(e.settled=!1,It(o)?new Date(o.getTime()+r):o+r)}if(Array.isArray(o))return o.map((s,r)=>t(e,n[r],o[r],i[r]));if("object"==typeof o){const s={};for(const r in o)s[r]=t(e,n[r],o[r],i[r]);return s}throw new Error(`Cannot spring ${typeof o} values`)}(o,u,t,a);return r=e,u=t,n.set(t=i),o.settled&&(c=null),!o.settled})),new Promise(t=>{c.promise.then(()=>{i===l&&t()})})}const h={set:$,update:(e,n)=>$(e(a,t),n),subscribe:n.subscribe,stiffness:o,damping:i,precision:s};return h}function Dt(t,{delay:n=0,duration:o=400,easing:i=e}){const s=+getComputedStyle(t).opacity;return{delay:n,duration:o,easing:i,css:t=>"opacity: "+t*s}}function Pt(t){let e,n,o,i,s,r,c=Lt(t[5].x/t[0].getBoundingClientRect().width*t[4].duration)+"";return{c(){e=x("div"),n=x("span"),o=w(c),C(n,"class","svelte-1sgtn0h"),C(e,"class","clock svelte-1sgtn0h"),N(e,"left",t[5].x/t[0].getBoundingClientRect().width*100+"%")},m(t,i){y(t,e,i),v(e,n),v(n,o),r=!0},p(t,n){(!r||49&n)&&c!==(c=Lt(t[5].x/t[0].getBoundingClientRect().width*t[4].duration)+"")&&R(o,c),(!r||33&n)&&N(e,"left",t[5].x/t[0].getBoundingClientRect().width*100+"%")},i(t){r||(J(()=>{s&&s.end(1),i||(i=lt(e,Dt,{duration:200})),i.start()}),r=!0)},o(t){i&&i.invalidate(),s=ut(e,Dt,{duration:200}),r=!1},d(t){t&&b(e),t&&s&&s.end()}}}function zt(t){let e,n,o,s,r,c,l,u,a,d,f,p=t[0]&&t[1]&&Pt(t);return{c(){e=k(),p&&p.c(),n=k(),o=x("div"),s=x("div"),r=k(),c=x("canvas"),C(s,"class","inner svelte-1sgtn0h"),N(s,"width",100*t[2]+"%"),C(c,"height",l=1),C(c,"width",u=1920),C(c,"class","svelte-1sgtn0h"),C(o,"class","outer svelte-1sgtn0h")},m(i,l){y(i,e,l),p&&p.m(i,l),y(i,n,l),y(i,o,l),v(o,s),v(o,r),v(o,c),t[14](c),t[15](o),a=!0,d||(f=[E(window,"mousemove",t[13]),E(document.body,"click",t[7]),E(o,"mouseleave",t[16]),E(o,"mouseenter",t[17])],d=!0)},p(t,[e]){t[0]&&t[1]?p?(p.p(t,e),3&e&&st(p,1)):(p=Pt(t),p.c(),st(p,1),p.m(n.parentNode,n)):p&&(ot(),rt(p,1,1,()=>{p=null}),it()),(!a||4&e)&&N(s,"width",100*t[2]+"%")},i(t){a||(st(p),a=!0)},o(t){rt(p),a=!1},d(s){s&&b(e),p&&p.d(s),s&&b(n),s&&b(o),t[14](null),t[15](null),d=!1,i(f)}}}function Lt(t){if(isNaN(t))return"...";const e=Math.floor(t/60);return(t=Math.floor(t%60))<10&&(t="0"+t),`${e}:${t}`}function Ot(t,e,n){let o,i,s;c(t,Bt,t=>n(4,o=t)),c(t,Et,t=>n(12,i=t));let r,l=Tt({x:50,y:50},{stiffness:.5,damping:.95});c(t,l,t=>n(5,s=t));let u=!1,{videoElement:a}=e,{time:d}=e;let f,p,m=0,$=[];var h;L(()=>{f=p.getContext("2d")}),h=()=>{if(p){f.clearRect(0,0,1920,1);var t=f.getImageData(0,0,1920,1);$.forEach(e=>{let n=e.index/i.length,o=Math.round(1920*n);var s,r,c,l,u;s=255,r=255,c=255,l=255,u=4*(o+0),t.data[u+0]=s,t.data[u+1]=r,t.data[u+2]=c,t.data[u+3]=l}),f.putImageData(t,0,0)}},z().$$.after_update.push(h);return t.$set=t=>{"videoElement"in t&&n(8,a=t.videoElement),"time"in t&&n(9,d=t.time)},t.$$.update=()=>{528&t.$$.dirty&&o.duration&&n(2,m=d/o.duration),4096&t.$$.dirty&&($=i.map((t,e)=>({index:e,hasPosition:null!=t&&"deleted"!=t})).filter(({hasPosition:t})=>t))},[r,u,m,p,o,s,l,async function(t){if(t.target==r){let e=r.getBoundingClientRect(),i=(t.clientX-e.left)/e.width;console.log("String: ",(i*o.duration).toString()),n(8,a.currentTime=(i*o.duration).toString(),a),console.log(a.currentTime)}},a,d,$,f,i,t=>l.set({x:t.clientX-r.getBoundingClientRect().x,y:t.clientY}),function(t){X[t?"unshift":"push"](()=>{n(3,p=t)})},function(t){X[t?"unshift":"push"](()=>{n(0,r=t)})},()=>n(1,u=!1),()=>n(1,u=!0)]}class Xt extends gt{constructor(t){super(),ht(this,t,Ot,zt,r,{videoElement:8,time:9})}}function Ft(t,e,n){const o=t.slice();return o[24]=e[n],o}function Wt(t){let e,n,o,i,s,r,c=Jt(t[8](t[6].x),!0)+"";return{c(){e=x("div"),n=x("span"),o=w(c),C(e,"class","clock svelte-xocd95"),N(e,"left",t[6].x/t[2].getBoundingClientRect().width*100+"%")},m(t,i){y(t,e,i),v(e,n),v(n,o),r=!0},p(t,n){(!r||64&n)&&c!==(c=Jt(t[8](t[6].x),!0)+"")&&R(o,c),(!r||68&n)&&N(e,"left",t[6].x/t[2].getBoundingClientRect().width*100+"%")},i(t){r||(J(()=>{s&&s.end(1),i||(i=lt(e,Dt,{duration:200})),i.start()}),r=!0)},o(t){i&&i.invalidate(),s=ut(e,Dt,{duration:200}),r=!1},d(t){t&&b(e),t&&s&&s.end()}}}function Yt(t,e){let n;return{key:t,first:null,c(){n=x("div"),C(n,"class","point svelte-xocd95"),N(n,"transform","translate("+e[24].position*e[5]/100+"px, -50%)"),this.first=n},m(t,e){y(t,n,e)},p(t,e){48&e&&N(n,"transform","translate("+t[24].position*t[5]/100+"px, -50%)")},d(t){t&&b(n)}}}function qt(t){let e,n,o,s,r,c,l,u,a,d,f,p,m,$,h,g,_,M,A=Jt(t[0])+"",B=[],j=new Map,I=t[2]&&t[1]&&Wt(t),T=t[4];const D=t=>t[24].index;for(let e=0;e<T.length;e+=1){let n=Ft(t,T,e),o=D(n);j.set(o,B[e]=Yt(o,n))}return{c(){e=k(),n=x("div"),o=w(A),s=k(),r=x("div"),c=x("div"),l=k(),u=x("div"),a=k(),I&&I.c(),d=k();for(let t=0;t<B.length;t+=1)B[t].c();f=k(),p=x("div"),p.textContent="-5",m=k(),$=x("div"),$.textContent="+5",C(n,"class","time svelte-xocd95"),C(c,"class","inner svelte-xocd95"),N(c,"width","100%"),C(u,"class","centre svelte-xocd95"),C(p,"class","left svelte-xocd95"),C($,"class","right svelte-xocd95"),C(r,"class","outer svelte-xocd95"),J(()=>t[21].call(r))},m(i,w){y(i,e,w),y(i,n,w),v(n,o),y(i,s,w),y(i,r,w),v(r,c),t[19](c),v(r,l),v(r,u),v(r,a),I&&I.m(r,null),v(r,d);for(let t=0;t<B.length;t+=1)B[t].m(r,null);v(r,f),v(r,p),v(r,m),v(r,$),t[20](r),h=function(t,e){const n=getComputedStyle(t),o=(parseInt(n.zIndex)||0)-1;"static"===n.position&&(t.style.position="relative");const i=x("iframe");i.setAttribute("style",`display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ${o};`),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const s=S();let r;return s?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=E(window,"message",t=>{t.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{r=E(i.contentWindow,"resize",e)}),v(t,i),()=>{(s||r&&i.contentWindow)&&r(),b(i)}}(r,t[21].bind(r)),g=!0,_||(M=[E(window,"mousemove",t[18]),E(document.body,"click",t[9]),E(r,"mouseleave",t[22]),E(r,"mouseenter",t[23])],_=!0)},p(t,[e]){if((!g||1&e)&&A!==(A=Jt(t[0])+"")&&R(o,A),t[2]&&t[1]?I?(I.p(t,e),6&e&&st(I,1)):(I=Wt(t),I.c(),st(I,1),I.m(r,d)):I&&(ot(),rt(I,1,1,()=>{I=null}),it()),48&e){const n=t[4];B=function(t,e,n,o,i,s,r,c,l,u,a,d){let f=t.length,p=s.length,m=f;const $={};for(;m--;)$[t[m].key]=m;const h=[],g=new Map,v=new Map;for(m=p;m--;){const t=d(i,s,m),c=n(t);let l=r.get(c);l?o&&l.p(t,e):(l=u(c,t),l.c()),g.set(c,h[m]=l),c in $&&v.set(c,Math.abs(m-$[c]))}const y=new Set,b=new Set;function x(t){st(t,1),t.m(c,a),r.set(t.key,t),a=t.first,p--}for(;f&&p;){const e=h[p-1],n=t[f-1],o=e.key,i=n.key;e===n?(a=e.first,f--,p--):g.has(i)?!r.has(o)||y.has(o)?x(e):b.has(i)?f--:v.get(o)>v.get(i)?(b.add(o),x(e)):(y.add(i),f--):(l(n,r),f--)}for(;f--;){const e=t[f];g.has(e.key)||l(e,r)}for(;p;)x(h[p-1]);return h}(B,e,D,1,t,n,j,r,at,Yt,f,Ft)}},i(t){g||(st(I),g=!0)},o(t){rt(I),g=!1},d(o){o&&b(e),o&&b(n),o&&b(s),o&&b(r),t[19](null),I&&I.d();for(let t=0;t<B.length;t+=1)B[t].d();t[20](null),h(),_=!1,i(M)}}}function Jt(t,e=!1){if(t<0)return"0:00";if(isNaN(t))return"...";let n=t-parseInt(t);n=(Math.round(100*n)/100).toString(),n=n.slice(2);const o=Math.floor(t/60);return(t=Math.floor(t%60))<10&&(t="0"+t),e?`${o}:${t}.${n}`:`${o}:${t}`}function Ut(t,e,n){let o,i,s;c(t,Bt,t=>n(14,o=t)),c(t,Et,t=>n(15,i=t));let r,l,u=!1,a=Tt({x:50,y:50},{stiffness:.5,damping:.95});c(t,a,t=>n(6,s=t));let{videoElement:d}=e,{time:f}=e,{context:p=5}=e,m=f;let $,h=0;function g(t,e){return 100*((function(t){return t/15}(t)-e)/p+.5)}let v=[];var y;let b;L(()=>{$=setInterval(()=>{if(o.paused)return;let t=i.map((t,e)=>({...t,index:e,hasPosition:null!=t&&"deleted"!=t,position:g(e,f)})).filter(({hasPosition:t,position:e})=>t&&e>=0&&e<=100);n(4,v=t)},20)}),y=()=>{clearInterval($)},z().$$.on_destroy.push(y);return t.$set=t=>{"videoElement"in t&&n(10,d=t.videoElement),"time"in t&&n(0,f=t.time),"context"in t&&n(11,p=t.context)},t.$$.update=()=>{16385&t.$$.dirty&&o.duration&&(h=f/o.duration)},[f,u,r,l,v,b,s,a,function(t){let e=t/l.getBoundingClientRect().width;return f+(e*p-p/2)},async function(t){if(t.target==l){let e=l.getBoundingClientRect(),o=(t.clientX-e.left)/e.width*p-p/2;n(10,d.currentTime+=o,d)}},d,p,h,$,o,i,m,g,t=>a.set({x:t.clientX-l.getBoundingClientRect().x,y:t.clientY}),function(t){X[t?"unshift":"push"](()=>{n(2,r=t)})},function(t){X[t?"unshift":"push"](()=>{n(3,l=t)})},function(){b=this.clientWidth,n(5,b)},()=>n(1,u=!1),()=>n(1,u=!0)]}class Ht extends gt{constructor(t){super(),ht(this,t,Ut,qt,r,{videoElement:10,time:0,context:11})}}function Vt(t){let e,n,o;return{c(){e=x("div"),C(e,"class","point svelte-jeb5oj"),N(e,"transform","translate("+t[2](t[1]).x+"px, "+t[2](t[1]).y+"px)")},m(t,n){y(t,e,n),o=!0},p(t,n){(!o||2&n)&&N(e,"transform","translate("+t[2](t[1]).x+"px, "+t[2](t[1]).y+"px)")},i(t){o||(n&&n.end(1),o=!0)},o(t){n=ut(e,Dt,{duration:100}),o=!1},d(t){t&&b(e),t&&n&&n.end()}}}function Gt(t){let e,n,o,i,s,r,c=JSON.stringify(t[1])+"",l=t[1]&&"deleted"!==t[1]&&Vt(t);return{c(){l&&l.c(),e=k(),n=x("div"),o=w(t[0]),i=k(),s=w(c),C(n,"class","debug svelte-jeb5oj")},m(t,c){l&&l.m(t,c),y(t,e,c),y(t,n,c),v(n,o),v(n,i),v(n,s),r=!0},p(t,[n]){t[1]&&"deleted"!==t[1]?l?(l.p(t,n),2&n&&st(l,1)):(l=Vt(t),l.c(),st(l,1),l.m(e.parentNode,e)):l&&(ot(),rt(l,1,1,()=>{l=null}),it()),(!r||1&n)&&R(o,t[0]),(!r||2&n)&&c!==(c=JSON.stringify(t[1])+"")&&R(s,c)},i(t){r||(st(l),r=!0)},o(t){rt(l),r=!1},d(t){l&&l.d(t),t&&b(e),t&&b(n)}}}function Kt(t,e,n){let o;c(t,Et,t=>n(5,o=t));let i,s,{time:r}=e,{container:l}=e;return t.$set=t=>{"time"in t&&n(3,r=t.time),"container"in t&&n(4,l=t.container)},t.$$.update=()=>{8&t.$$.dirty&&n(0,i=Ct(r)),40&t.$$.dirty&&n(1,s=o[Ct(r)])},[i,s,function(t){if(!l)return t;let e=l.getBoundingClientRect();return{x:t.x*e.width-5,y:t.y*e.height-5}},r,l]}class Qt extends gt{constructor(t){super(),ht(this,t,Kt,Gt,r,{time:3,container:4})}}function Zt(t){let e;return{c(){e=x("div"),e.textContent="Failed to load video.",C(e,"class","error svelte-fg8v9d")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function te(t){let e;const n=new Qt({props:{container:t[2],time:t[3]}});return{c(){ft(n.$$.fragment)},m(t,o){pt(n,t,o),e=!0},p(t,e){const o={};4&e&&(o.container=t[2]),8&e&&(o.time=t[3]),n.$set(o)},i(t){e||(st(n.$$.fragment,t),e=!0)},o(t){rt(n.$$.fragment,t),e=!1},d(t){mt(n,t)}}}function ee(t){let e,n,o,s,r,c,l,u,a,d=!1,f=!0;function p(){cancelAnimationFrame(o),e.paused||(o=m(p),d=!0),t[12].call(e)}let $=t[5]&&Zt(),h=t[6]&&!t[5]&&te(t);return{c(){e=x("video"),s=k(),$&&$.c(),r=k(),h&&h.c(),c=_(),e.src!==(n=t[8].src)&&C(e,"src",n),C(e,"preload",""),C(e,"class","svelte-fg8v9d"),void 0===t[1]&&J(()=>t[13].call(e))},m(n,o){y(n,e,o),t[14](e),isNaN(t[7])||(e.playbackRate=t[7]),y(n,s,o),$&&$.m(n,o),y(n,r,o),h&&h.m(n,o),y(n,c,o),l=!0,u||(a=[E(e,"timeupdate",p),E(e,"durationchange",t[13]),E(e,"play",t[15]),E(e,"pause",t[15]),E(e,"ratechange",t[16])],u=!0)},p(t,o){(!l||256&o&&e.src!==(n=t[8].src))&&C(e,"src",n),!d&&8&o&&!isNaN(t[3])&&(e.currentTime=t[3]),d=!1,1&o&&f!==(f=t[0])&&e[f?"pause":"play"](),128&o&&!isNaN(t[7])&&(e.playbackRate=t[7]),t[5]?$||($=Zt(),$.c(),$.m(r.parentNode,r)):$&&($.d(1),$=null),t[6]&&!t[5]?h?(h.p(t,o),96&o&&st(h,1)):(h=te(t),h.c(),st(h,1),h.m(c.parentNode,c)):h&&(ot(),rt(h,1,1,()=>{h=null}),it())},i(t){l||(st(h),l=!0)},o(t){rt(h),l=!1},d(n){n&&b(e),t[14](null),n&&b(s),$&&$.d(n),n&&b(r),h&&h.d(n),n&&b(c),u=!1,i(a)}}}function ne(t){let e,n,o,i,s,r,c,l,u,a,d,f,p;function m(e){t[11].call(null,e)}let $={videoElement:t[2]};void 0!==t[3]&&($.time=t[3]);const h=new Xt({props:$});function g(e){t[17].call(null,e)}X.push(()=>dt(h,"time",m));let _={container:t[2],$$slots:{default:[ee]},$$scope:{ctx:t}};void 0!==t[3]&&(_.time=t[3]);const N=new At({props:_});function M(e){t[18].call(null,e)}X.push(()=>dt(N,"time",g));let S={context:10,videoElement:t[2]};void 0!==t[3]&&(S.time=t[3]);const B=new Ht({props:S});return X.push(()=>dt(B,"time",M)),{c(){e=x("div"),ft(h.$$.fragment),o=k(),ft(N.$$.fragment),s=k(),r=x("div"),c=w(t[7]),l=w("x"),u=k(),ft(B.$$.fragment),C(r,"class","speed svelte-fg8v9d"),C(e,"class","video svelte-fg8v9d"),A(e,"seeking",t[4])},m(n,i){y(n,e,i),pt(h,e,null),v(e,o),pt(N,e,null),v(e,s),v(e,r),v(r,c),v(r,l),v(e,u),pt(B,e,null),d=!0,f||(p=E(window,"keydown",t[9]),f=!0)},p(t,[o]){const s={};4&o&&(s.videoElement=t[2]),!n&&8&o&&(n=!0,s.time=t[3],U(()=>n=!1)),h.$set(s);const r={};4&o&&(r.container=t[2]),524783&o&&(r.$$scope={dirty:o,ctx:t}),!i&&8&o&&(i=!0,r.time=t[3],U(()=>i=!1)),N.$set(r),(!d||128&o)&&R(c,t[7]);const l={};4&o&&(l.videoElement=t[2]),!a&&8&o&&(a=!0,l.time=t[3],U(()=>a=!1)),B.$set(l),16&o&&A(e,"seeking",t[4])},i(t){d||(st(h.$$.fragment,t),st(N.$$.fragment,t),st(B.$$.fragment,t),d=!0)},o(t){rt(h.$$.fragment,t),rt(N.$$.fragment,t),rt(B.$$.fragment,t),d=!1},d(t){t&&b(e),mt(h),mt(N),mt(B),f=!1,p()}}}function oe(t,e,n){let o,i,s;c(t,jt,t=>n(7,o=t)),c(t,Et,t=>n(10,i=t)),c(t,Bt,t=>n(8,s=t));let r,l,u=!0,a=0,f=!1;let p=!1,m=!1;return L(()=>{l.addEventListener("error",()=>{n(5,p=!0),n(6,m=!1)}),l.addEventListener("seeking",t=>{n(4,f=t.target.currentTime!==a)}),l.addEventListener("seeked",t=>{n(4,f=!1)}),l.addEventListener("loadeddata",()=>{n(6,m=!0),n(5,p=!1)})}),t.$$.update=()=>{2&t.$$.dirty&&Bt.setDuration(r),2&t.$$.dirty&&r&&d(Et,i=Array(Ct(r)).fill(null))},[u,r,l,a,f,p,m,o,s,async function(t){if(console.log(document.activeElement),"INPUT"!=document.activeElement.nodeName){if(" "==t.key){if(u){let t=o;d(jt,o=.1),l.play(),setTimeout(()=>d(jt,o=t),200)}else l.pause();t.preventDefault()}"ArrowLeft"==t.key&&n(2,l.currentTime=a-1,l),"ArrowRight"==t.key&&n(2,l.currentTime=a+1,l),"q"==t.key&&(console.log("Increase rate"),jt.increase()),"a"==t.key&&jt.decrease()}},i,function(t){a=t,n(3,a)},function(){a=this.currentTime,n(3,a)},function(){r=this.duration,n(1,r)},function(t){X[t?"unshift":"push"](()=>{n(2,l=t)})},function(){u=this.paused,n(0,u)},function(){o=this.playbackRate,jt.set(o)},function(t){a=t,n(3,a)},function(t){a=t,n(3,a)}]}class ie extends gt{constructor(t){super(),ht(this,t,oe,ne,r,{})}}function se(t){let e,n,o,i;const s=t[4].default,r=l(s,t,t[3],null);return{c(){e=x("button"),r&&r.c(),C(e,"class","svelte-1w5w4em")},m(s,c){y(s,e,c),r&&r.m(e,null),n=!0,o||(i=E(e,"click",t[0]),o=!0)},p(t,[e]){r&&r.p&&8&e&&a(r,s,t,t[3],e,null,null)},i(t){n||(st(r,t),n=!0)},o(t){rt(r,t),n=!1},d(t){t&&b(e),r&&r.d(t),o=!1,i()}}}function re(t,e,n){let{data:o}=e,{filename:i="untitled.json"}=e;let{$$slots:s={},$$scope:r}=e;return t.$set=t=>{"data"in t&&n(1,o=t.data),"filename"in t&&n(2,i=t.filename),"$$scope"in t&&n(3,r=t.$$scope)},[function(){!function(t,e){let n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}(i,JSON.stringify(o))},o,i,r,s]}class ce extends gt{constructor(t){super(),ht(this,t,re,se,r,{data:1,filename:2})}}function le(t){let e;return{c(){e=x("div"),e.innerHTML='<span class="svelte-1tinf72">Please enter video url</span>',C(e,"class","blocker svelte-1tinf72")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function ue(t){let e;return{c(){e=w("Download raw input")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function ae(t){let e;return{c(){e=w("Download labels")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function de(t){let e,n,o,s,r,c,l,u,a,d,f,p,m,$,h=fe(t[1].src)+"",g=(t[0]||""==t[1].src)&&le();const _=new ce({props:{data:t[2],filename:"log.json",$$slots:{default:[ue]},$$scope:{ctx:t}}}),N=new ce({props:{data:t[3],filename:"labels.json",$$slots:{default:[ae]},$$scope:{ctx:t}}});return{c(){e=x("header"),g&&g.c(),n=k(),o=x("h1"),s=w(h),r=k(),c=x("div"),l=x("div"),u=x("input"),d=k(),ft(_.$$.fragment),f=k(),ft(N.$$.fragment),C(o,"class","svelte-1tinf72"),u.autofocus=!0,C(u,"placeholder","Location of mp4 file"),C(u,"type","text"),u.value=a=t[1].src,C(u,"class","svelte-1tinf72"),C(l,"class","svelte-1tinf72"),A(l,"focus",t[0]||""==t[1].src),C(c,"class","buttons svelte-1tinf72"),C(e,"class","svelte-1tinf72")},m(i,a){y(i,e,a),g&&g.m(e,null),v(e,n),v(e,o),v(o,s),v(e,r),v(e,c),v(c,l),v(l,u),v(c,d),pt(_,c,null),v(c,f),pt(N,c,null),p=!0,u.focus(),m||($=[E(u,"keydown",pe),E(u,"focus",t[5]),E(u,"blur",t[6]),E(u,"input",t[4])],m=!0)},p(t,[o]){t[0]||""==t[1].src?g||(g=le(),g.c(),g.m(e,n)):g&&(g.d(1),g=null),(!p||2&o)&&h!==(h=fe(t[1].src)+"")&&R(s,h),(!p||2&o&&a!==(a=t[1].src)&&u.value!==a)&&(u.value=a),3&o&&A(l,"focus",t[0]||""==t[1].src);const i={};4&o&&(i.data=t[2]),128&o&&(i.$$scope={dirty:o,ctx:t}),_.$set(i);const r={};8&o&&(r.data=t[3]),128&o&&(r.$$scope={dirty:o,ctx:t}),N.$set(r)},i(t){p||(st(_.$$.fragment,t),st(N.$$.fragment,t),p=!0)},o(t){rt(_.$$.fragment,t),rt(N.$$.fragment,t),p=!1},d(t){t&&b(e),g&&g.d(),mt(_),mt(N),m=!1,i($)}}}function fe(t){let e=t.split("/");return e[e.length-1]}function pe(t){"Enter"==t.key&&t.target.blur(),console.log(t.key),"Escape"==t.key&&t.target.blur()}function me(t,e,n){let o,i,s;c(t,Bt,t=>n(1,o=t)),c(t,_t,t=>n(2,i=t)),c(t,Et,t=>n(3,s=t));let r=!0;return[r,o,i,s,function(t){let e=t.target.value;e!=o.src&&Bt.setSrc(e)},function(t){n(0,r=!0)},()=>n(0,r=!1)]}class $e extends gt{constructor(t){super(),ht(this,t,me,de,r,{})}}function he(e){let n,o,i,s;const r=new $e({}),c=new ie({});return{c(){n=x("main"),ft(r.$$.fragment),o=k(),i=x("div"),ft(c.$$.fragment),C(i,"class","speed svelte-oryjnn"),C(n,"class","svelte-oryjnn")},m(t,e){y(t,n,e),pt(r,n,null),v(n,o),v(n,i),pt(c,i,null),s=!0},p:t,i(t){s||(st(r.$$.fragment,t),st(c.$$.fragment,t),s=!0)},o(t){rt(r.$$.fragment,t),rt(c.$$.fragment,t),s=!1},d(t){t&&b(n),mt(r),mt(c)}}}function ge(t,e,n){let{name:o}=e;return t.$set=t=>{"name"in t&&n(0,o=t.name)},[o]}return new class extends gt{constructor(t){super(),ht(this,t,ge,he,r,{name:0})}}({target:document.body,props:{name:"Video Annotator"}})}();
//# sourceMappingURL=bundle.js.map
